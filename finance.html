<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë„¤ì´ë²„ ì¦ì‹œ í´ë¡  - ê¸ˆìœµ ë‰´ìŠ¤ ë¶„ì„ í”Œë«í¼</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” ë° í°íŠ¸ ì„¤ì • */
        body {
            font-family: 'Naver NanumGothic', 'Malgun Gothic', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7; /* ë„¤ì´ë²„ ë°°ê²½ìƒ‰ê³¼ ìœ ì‚¬ */
            color: #1c1c1c;
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        header {
            background-color: #fff;
            border-bottom: 1px solid #ebebeb;
            padding: 10px 0;
        }
        .header-content {
            width: 1080px; /* ë„¤ì´ë²„ í‘œì¤€ ë„ˆë¹„ */
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo a {
            font-size: 24px;
            font-weight: bold;
            color: #008850; /* ë„¤ì´ë²„ ê·¸ë¦° */
            text-decoration: none;
        }
        nav a {
            margin-left: 20px;
            text-decoration: none;
            color: #333;
            font-size: 14px;
        }

        /* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */
        .container {
            width: 1080px;
            margin: 20px auto;
            display: flex; /* ë©”ì¸ ì»¨í…ì¸ ë¥¼ ê°€ë¡œë¡œ ë°°ì¹˜ */
            gap: 20px;
        }

        /* ì™¼ìª½ ì„¹ì…˜ (ì£¼ìš” ì§€ìˆ˜, ê´€ì‹¬ì¢…ëª©, ë‰´ìŠ¤/í† ë¡  ë“±) */
        .main-content {
            flex: 3; /* 70% ì •ë„ ë„ˆë¹„ */
            min-width: 700px;
        }

        /* ì˜¤ë¥¸ìª½ ì„¹ì…˜ (ê´‘ê³ , ë­í‚¹ ë“± ë³´ì¡° ì •ë³´) */
        .side-content {
            flex: 1; /* 30% ì •ë„ ë„ˆë¹„ */
            min-width: 300px;
        }

        /* ê³µí†µ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        .card h3 {
            border-bottom: 2px solid #008850;
            padding-bottom: 10px;
            margin-top: 0;
            font-size: 18px;
            color: #1c1c1c;
        }

        /* ì£¼ìš” ì§€ìˆ˜ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .index-card {
            display: flex;
            justify-content: space-between;
            text-align: center;
        }
        .index-item {
            flex: 1;
        }
        .index-item .value {
            font-size: 32px;
            font-weight: bold;
            color: #d84a4a; /* í•˜ë½ ê°€ì • */
            margin-top: 5px;
        }
        .index-item .change {
            font-size: 16px;
            color: #d84a4a; /* í•˜ë½ ê°€ì • */
        }

        /* ë‰´ìŠ¤ ëª©ë¡ ìŠ¤íƒ€ì¼ */
        .news-list {
            list-style: none;
            padding: 0;
        }
        .news-list li {
            border-bottom: 1px dotted #eee;
            padding: 8px 0;
            font-size: 14px;
        }
        .news-list li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>

    <header>
        <div class="header-content">
            <div class="logo"><a href="#">ë„¤ì´ë²„ ì¦ì‹œ</a></div>
            <nav>
                <a href="#">êµ­ë‚´ì¦ì‹œ</a>
                <a href="#">í•´ì™¸ì¦ì‹œ</a>
                <a href="#">ì‹œì¥ë¶„ì„</a>
                <a href="#">ê¸ˆìœµë‰´ìŠ¤</a>
                <a href="#">ë§ˆì´í˜ì´ì§€</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <div class="card">
                <h3>ì£¼ìš” ì¦ì‹œ</h3>
                <div class="index-card">
                    <div class="index-item">
                        <p>KOSPI</p>
                        <p class="value">2,500.00</p>
                        <p class="change">-10.50 (-0.42%)</p>
                    </div>
                    <div class="index-item">
                        <p>KOSDAQ</p>
                        <p class="value" style="color: #008850;">850.50</p>
                        <p class="change" style="color: #008850;">+5.25 (+0.62%)</p>
                    </div>
                    <div class="index-item">
                        <p>í™˜ìœ¨(USD/KRW)</p>
                        <p class="value" style="color: #d84a4a;">1,350.50</p>
                        <p class="change" style="color: #d84a4a;">+2.50 (+0.18%)</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>ê¸ˆìœµ ë‰´ìŠ¤ ë° ë¶„ì„ ê²°ê³¼</h3>
                <ul class="news-list">
                    <li><a href="#">[ì†ë³´] íŒŒì›” ì˜ì¥, ì¸í”Œë ˆì´ì…˜ ë‘”í™” ë°œì–¸... ë‰´ìš• ì¦ì‹œ ìƒìŠ¹ ë§ˆê°</a></li>
                    <li><a href="#">LLM ê¸°ë°˜ ì¢…ëª© ë¶„ì„: 'ì‚¼ì„±ì „ì', ë§¤ìˆ˜ ì˜ê²¬ ì§€ë°°ì </a></li>
                    <li><a href="#">ìœ ëŸ½ ì¦ì‹œ, ì—ë„ˆì§€ì£¼ ê°•ì„¸ì— í˜ì…ì–´ ì¼ì œíˆ ì˜¤ë¦„ì„¸</a></li>
                    <li><a href="#">[ë‹¨ë…] ì‹ ê·œ AI ì¹© ì¶œì‹œ ì„ë°• ì†Œì‹ì— ê´€ë ¨ì£¼ ê¸‰ë“±</a></li>
                    <li><a href="#">ì˜¤ëŠ˜ì˜ ì™¸ì‹  í—¤ë“œë¼ì¸: ê¸€ë¡œë²Œ ê²½ê¸° ì¹¨ì²´ ìš°ë ¤ ì™„í™”</a></li>
                </ul>
            </div>

            <div class="card">
                <h3>ì£¼ìš” ì¢…ëª©</h3>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background-color: #f5f5f5;">
                            <th style="padding: 8px; text-align: left;">ì¢…ëª©ëª…</th>
                            <th style="padding: 8px; text-align: right;">í˜„ì¬ê°€</th>
                            <th style="padding: 8px; text-align: right;">ë“±ë½ë¥ </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 8px; border-bottom: 1px dotted #eee;">ì‚¼ì„±ì „ì</td>
                            <td style="padding: 8px; text-align: right;">70,000</td>
                            <td style="padding: 8px; text-align: right; color: #d84a4a;">-1.50%</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border-bottom: 1px dotted #eee;">SKí•˜ì´ë‹‰ìŠ¤</td>
                            <td style="padding: 8px; text-align: right;">120,000</td>
                            <td style="padding: 8px; text-align: right; color: #008850;">+2.10%</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px;">ë„¤ì´ë²„</td>
                            <td style="padding: 8px; text-align: right;">250,000</td>
                            <td style="padding: 8px; text-align: right; color: #d84a4a;">-0.80%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>

        <div class="side-content">
            <div class="card">
                <h3>ë‚˜ì˜ ê´€ì‹¬ ì¢…ëª©</h3>
                <ul class="news-list">
                    <li><a href="#">OOì „ì (+3.5%)</a></li>
                    <li><a href="#">XXë°”ì´ì˜¤ (-1.2%)</a></li>
                    <li><a href="#">YYí™”í•™ (ë³´í•©)</a></li>
                </ul>
            </div>
            
            <div class="card">
                <h3>ì¸ê¸° ê²€ìƒ‰ ìˆœìœ„</h3>
                <ol style="padding-left: 20px;">
                    <li>ì¹´ì¹´ì˜¤</li>
                    <li>POSCO</li>
                    <li>LGì—ë„ˆì§€ì†”ë£¨ì…˜</li>
                </ol>
            </div>
            
        </div>
    </div>

    
</body>
<script>
        // ğŸš¨ [ì£¼ì˜] ì´ API_URL ë³€ìˆ˜ëŠ” ì‹¤ì œ ë¡œë“œ ë°¸ëŸ°ì„œ DNS ì£¼ì†Œë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.
        // í˜„ì¬ëŠ” Flask ê°œë°œ ì„œë²„ ì£¼ì†Œë¡œ ê°€ì •í•©ë‹ˆë‹¤.
        const API_URL = 'http://project-alb-936794534.ap-northeast-2.elb.amazonaws.com'; 
        
        async function loadFinanceData() {
            try {
                // Flask ë°±ì—”ë“œì—ì„œ ì¤€ë¹„ëœ ì¦ì‹œ ì •ë³´ API í˜¸ì¶œ
                const response = await fetch(`${API_URL}/api/finance`);
                if (!response.ok) throw new Error('ê¸ˆìœµ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                
                const data = await response.json();
                
                // 1. ì£¼ìš” ì¦ì‹œ ì§€ìˆ˜ ì—…ë°ì´íŠ¸
                updateIndex('KOSPI', data.KOSPI);
                updateIndex('KOSDAQ', data.KOSDAQ);
                updateIndex('í™˜ìœ¨(USD/KRW)', data.USD_KRW);
                
                // 2. ë‰´ìŠ¤ ëª©ë¡ ì—…ë°ì´íŠ¸
                updateNewsList(data.news);
                
                // 3. ì£¼ìš” ì¢…ëª© í…Œì´ë¸” ì—…ë°ì´íŠ¸
                updateTopStocks(data.top_stocks);

            } catch (error) {
                console.error("ê¸ˆìœµ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:", error);
                // ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ ë“±ì˜ ì²˜ë¦¬
                document.querySelector('.index-card').innerHTML = '<p style="color:red; text-align:center;">ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. Flask ì„œë²„ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>';
            }
        }

        // ì§€ìˆ˜ í•­ëª© ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateIndex(name, indexData) {
            const indexItems = document.querySelectorAll('.index-item');
            let targetItem = null;
            
            // ì´ë¦„ìœ¼ë¡œ í•´ë‹¹ DOM ìš”ì†Œë¥¼ ì°¾ìŒ
            indexItems.forEach(item => {
                if (item.querySelector('p').textContent.includes(name.split('(')[0].trim())) {
                    targetItem = item;
                }
            });

            if (targetItem) {
                const valueElement = targetItem.querySelector('.value');
                const changeElement = targetItem.querySelector('.change');

                valueElement.textContent = indexData.value;
                changeElement.textContent = indexData.change;

                // ë“±ë½ì— ë”°ë¥¸ ìƒ‰ìƒ ì ìš© (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€í•˜ë©° ì—…ë°ì´íŠ¸)
                let color = '#d84a4a'; // ê¸°ë³¸ í•˜ë½ (ë¹¨ê°„ìƒ‰)
                if (indexData.status === 'up') {
                    color = '#008850'; // ìƒìŠ¹ (ë…¹ìƒ‰)
                } else if (indexData.status === 'flat') {
                    color = '#1c1c1c'; // ë³´í•© (ê²€ì •)
                }
                
                valueElement.style.color = color;
                changeElement.style.color = color;
            }
        }

        // ë‰´ìŠ¤ ëª©ë¡ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateNewsList(news) {
            const newsListUl = document.querySelector('.news-list');
            // 'ê¸ˆìœµ ë‰´ìŠ¤ ë° ë¶„ì„ ê²°ê³¼' ì¹´ë“œì— í•´ë‹¹í•˜ëŠ” ulë§Œ íƒ€ê²ŸíŒ… (CSS êµ¬ì¡°ìƒ)
            if (newsListUl) { 
                newsListUl.innerHTML = '';
                news.forEach(item => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a href="#">${item}</a>`;
                    newsListUl.appendChild(li);
                });
            }
        }

        // ì£¼ìš” ì¢…ëª© í…Œì´ë¸” ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateTopStocks(stocks) {
            const tableBody = document.querySelector('.card:nth-child(3) tbody');
            if (tableBody) {
                tableBody.innerHTML = '';
                stocks.forEach((stock, index) => {
                    // ë“±ë½ë¥ ì— ë”°ë¥¸ ìƒ‰ìƒ ê²°ì •
                    let color = '#1c1c1c'; // ê¸°ë³¸ ê²€ì •
                    if (stock.rate.includes('+')) {
                        color = '#008850'; // ìƒìŠ¹ (ë…¹ìƒ‰)
                    } else if (stock.rate.includes('-')) {
                        color = '#d84a4a'; // í•˜ë½ (ë¹¨ê°„ìƒ‰)
                    }

                    const row = `
                        <tr>
                            <td style="padding: 8px; ${index < stocks.length - 1 ? 'border-bottom: 1px dotted #eee;' : ''}">${stock.name}</td>
                            <td style="padding: 8px; text-align: right;">${stock.price}</td>
                            <td style="padding: 8px; text-align: right; color: ${color};">${stock.rate}</td>
                        </tr>
                    `;
                    tableBody.innerHTML += row;
                });
            }
        }


        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¡œë“œ ì‹œì‘
        loadFinanceData(); 

        // 1ë¶„(60000ms)ë§ˆë‹¤ ë°ì´í„° ìƒˆë¡œê³ ì¹¨ (ì‹¤ì‹œê°„ íš¨ê³¼)
        setInterval(loadFinanceData, 60000); 
    </script>
</html>